# Core


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-docments/blob/main/cjm_nbdev_docments/core.py#L20"
target="_blank" style="float:right; font-size:smaller">source</a>

### DocmentsCheckResult

>  DocmentsCheckResult (name:str, type:str, notebook:str,
>                           has_docstring:bool,
>                           params_documented:Dict[str,bool],
>                           return_documented:bool, missing_params:List[str],
>                           is_compliant:bool, source:str, has_todos:bool=False,
>                           todo_count:int=0,
>                           params_with_type_hints:Dict[str,bool]=None,
>                           return_has_type_hint:bool=False,
>                           params_missing_type_hints:List[str]=None)

*Result of checking a function/class for docments compliance*

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-docments/blob/main/cjm_nbdev_docments/core.py#L45"
target="_blank" style="float:right; font-size:smaller">source</a>

### extract_param_docs_from_func

>  extract_param_docs_from_func (func:Callable)

*Extract parameter documentation from function object using
fastcore.docments*

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 38%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>func</td>
<td>Callable</td>
<td>Function object to extract docs from</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>Dict</strong></td>
<td><strong>Mapping of parameter names to their
documentation</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-docments/blob/main/cjm_nbdev_docments/core.py#L58"
target="_blank" style="float:right; font-size:smaller">source</a>

### extract_param_docs

>  extract_param_docs (source:str)

*Extract parameter documentation from function source using docments
style (fallback)*

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 38%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>source</td>
<td>str</td>
<td>Function source code</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>Dict</strong></td>
<td><strong>Mapping of parameter names to their
documentation</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-docments/blob/main/cjm_nbdev_docments/core.py#L93"
target="_blank" style="float:right; font-size:smaller">source</a>

### check_return_doc

>  check_return_doc (source:str)

*Check if function has return documentation*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>source</td>
<td>str</td>
<td>Function source code</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>bool</strong></td>
<td><strong>Whether return is documented</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-docments/blob/main/cjm_nbdev_docments/core.py#L115"
target="_blank" style="float:right; font-size:smaller">source</a>

### count_todos_in_docs

>  count_todos_in_docs (source:str, name:str)

*Count TODO placeholders only in documentation (docstring, param docs,
return docs)*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>source</td>
<td>str</td>
<td>Function/class source code</td>
</tr>
<tr>
<td>name</td>
<td>str</td>
<td>Name of the function/class for AST parsing</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>Tuple</strong></td>
<td><strong>(todo_count, has_todos)</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-docments/blob/main/cjm_nbdev_docments/core.py#L163"
target="_blank" style="float:right; font-size:smaller">source</a>

### check_has_docstring_from_func

>  check_has_docstring_from_func (func:Callable)

*Check if a function has a docstring using fastcore.docments*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>func</td>
<td>Callable</td>
<td>Function object to check</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>bool</strong></td>
<td><strong>Whether the function has a docstring</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-docments/blob/main/cjm_nbdev_docments/core.py#L176"
target="_blank" style="float:right; font-size:smaller">source</a>

### check_has_docstring

>  check_has_docstring (source:str, name:str)

*Check if a function/class has a docstring using AST parsing (fallback)*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>source</td>
<td>str</td>
<td>Function/class source code</td>
</tr>
<tr>
<td>name</td>
<td>str</td>
<td>Name of the function/class</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>bool</strong></td>
<td><strong>Whether the definition has a docstring</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-docments/blob/main/cjm_nbdev_docments/core.py#L200"
target="_blank" style="float:right; font-size:smaller">source</a>

### function_has_return_value

>  function_has_return_value (source:str, name:str)

*Check if a function actually returns a value (not just implicit None)*

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 38%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>source</td>
<td>str</td>
<td>Function source code</td>
</tr>
<tr>
<td>name</td>
<td>str</td>
<td>Function name</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>bool</strong></td>
<td><strong>Whether function has explicit return statements with
values</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-docments/blob/main/cjm_nbdev_docments/core.py#L232"
target="_blank" style="float:right; font-size:smaller">source</a>

### check_type_hints

>  check_type_hints (definition:Dict[str,Any], source:Optional[str]=None)

*Check which parameters and return value have type hints*

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>definition</td>
<td>Dict</td>
<td></td>
<td>Definition dict from scanner</td>
</tr>
<tr>
<td>source</td>
<td>Optional</td>
<td>None</td>
<td>Function source code (optional)</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>Tuple</strong></td>
<td></td>
<td><strong>(params_with_type_hints, missing_type_hints,
return_has_type_hint)</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-docments/blob/main/cjm_nbdev_docments/core.py#L275"
target="_blank" style="float:right; font-size:smaller">source</a>

### check_params_documentation

>  check_params_documentation (definition:Dict[str,Any], source:str)

*Check parameter and return documentation for a function*

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 38%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>definition</td>
<td>Dict</td>
<td>Definition dict from scanner</td>
</tr>
<tr>
<td>source</td>
<td>str</td>
<td>Function source code</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>Tuple</strong></td>
<td><strong>(params_documented, missing_params,
return_documented)</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-docments/blob/main/cjm_nbdev_docments/core.py#L316"
target="_blank" style="float:right; font-size:smaller">source</a>

### determine_compliance

>  determine_compliance (has_docstring:bool,
>                            params_documented:Dict[str,bool],
>                            return_documented:bool)

*Determine if a definition is compliant based on documentation checks*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>has_docstring</td>
<td>bool</td>
<td>Whether definition has a docstring</td>
</tr>
<tr>
<td>params_documented</td>
<td>Dict</td>
<td>Which params have documentation</td>
</tr>
<tr>
<td>return_documented</td>
<td>bool</td>
<td>Whether return is documented</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>bool</strong></td>
<td><strong>Overall compliance status</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-docments/blob/main/cjm_nbdev_docments/core.py#L329"
target="_blank" style="float:right; font-size:smaller">source</a>

### check_definition

>  check_definition (definition:Dict[str,Any])

*Check a function/class definition for docments compliance*

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 38%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>definition</td>
<td>Dict</td>
<td>Definition dict from scanner</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>DocmentsCheckResult</strong></td>
<td><strong>Check result with compliance details</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-docments/blob/main/cjm_nbdev_docments/core.py#L378"
target="_blank" style="float:right; font-size:smaller">source</a>

### check_notebook

>  check_notebook (nb_path:str)

*Check a specific notebook for docments compliance*

<table>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>nb_path</td>
<td>str</td>
<td>Path to notebook file</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>None</strong></td>
<td><strong>Prints compliance report</strong></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/cj-mills/cjm-nbdev-docments/blob/main/cjm_nbdev_docments/core.py#L398"
target="_blank" style="float:right; font-size:smaller">source</a>

### check_function

>  check_function (func:Callable)

*Check a single function for docments compliance*

<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 38%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>func</td>
<td>Callable</td>
<td>Function object to check</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><strong>DocmentsCheckResult</strong></td>
<td><strong>Check result for the function</strong></td>
</tr>
</tbody>
</table>

``` python
# Test checking a specific notebook
check_notebook("core.ipynb")
```

    Checking core.ipynb:
    ðŸ“š Docments Compliance Report
    ==================================================
    Total definitions: 15
    âœ… Compliant: 15
    âŒ Non-compliant: 0


    âœ… Compliant definitions:
    ------------------------------

    ðŸ““ core.ipynb:
      âœ… DocmentsCheckResult
      âœ… __post_init__
      âœ… extract_param_docs_from_func
      âœ… extract_param_docs
      âœ… check_return_doc
      âœ… count_todos_in_docs
      âœ… check_has_docstring_from_func
      âœ… check_has_docstring
      âœ… function_has_return_value
      âœ… check_type_hints
      âœ… check_params_documentation
      âœ… determine_compliance
      âœ… check_definition
      âœ… check_notebook
      âœ… check_function

``` python
# Test checking a function directly
def test_func(
    x: int,  # First number
    y: int = 0  # Second number  
) -> int:  # Sum of x and y
    "Add two numbers"
    return x + y

check_function(test_func)
```

    âœ… test_func is compliant

    DocmentsCheckResult(name='test_func', type='FunctionDef', notebook='runtime', has_docstring=True, params_documented={'x': True, 'y': True}, return_documented=True, missing_params=[], is_compliant=True, source='def test_func(\n    x: int,  # First number\n    y: int = 0  # Second number  \n) -> int:  # Sum of x and y\n    "Add two numbers"\n    return x + y\n', has_todos=False, todo_count=0, params_with_type_hints={'x': True, 'y': True}, return_has_type_hint=True, params_missing_type_hints=[])

``` python
# Test with a non-compliant function
def bad_func(x, y):
    return x + y

check_function(bad_func)
```

    âŒ bad_func is not compliant
       - Missing docstring
       - Missing docs for: x, y
       - Missing type hints for: x, y
       - Missing return type hint

    DocmentsCheckResult(name='bad_func', type='FunctionDef', notebook='runtime', has_docstring=False, params_documented={'x': False, 'y': False}, return_documented=True, missing_params=['x', 'y'], is_compliant=False, source='def bad_func(x, y):\n    return x + y\n', has_todos=False, todo_count=0, params_with_type_hints={'x': False, 'y': False}, return_has_type_hint=False, params_missing_type_hints=['x', 'y', 'return'])

``` python
# Test functions with and without return values
test_no_return = '''def function_no_return(x, y):
    "Print the sum but don't return anything"
    print(x + y)'''

test_explicit_none = '''def function_explicit_none(x, y):
    "Explicitly return None"
    print(x + y)
    return None'''

test_has_return = '''def function_has_return(x, y):
    "Return the sum"
    return x + y'''

test_conditional_return = '''def function_conditional_return(x, y):
    "Sometimes return a value"
    if x > 0:
        return x + y
    # Implicit None return when x <= 0'''

for source in [test_no_return, test_explicit_none, test_has_return, test_conditional_return]:
    # Extract function name from source
    import re
    name_match = re.search(r'def\s+(\w+)', source)
    if name_match:
        func_name = name_match.group(1)
        
        test_def = {
            'name': func_name,
            'type': 'FunctionDef',
            'source': source,
            'notebook': 'test.ipynb',
            'args': [{'name': 'x', 'annotation': None}, {'name': 'y', 'annotation': None}],
            'returns': None  # No return type annotation
        }
        
        result = check_definition(test_def)
        has_return = function_has_return_value(source, func_name)
        
        print(f"{func_name}:")
        print(f"  Has return value: {has_return}")
        print(f"  Missing type hints: {result.params_missing_type_hints}")
        print(f"  'return' in missing hints: {'return' in result.params_missing_type_hints}")
        print()
```

    function_no_return:
      Has return value: False
      Missing type hints: ['x', 'y']
      'return' in missing hints: False

    function_explicit_none:
      Has return value: False
      Missing type hints: ['x', 'y']
      'return' in missing hints: False

    function_has_return:
      Has return value: True
      Missing type hints: ['x', 'y', 'return']
      'return' in missing hints: True

    function_conditional_return:
      Has return value: True
      Missing type hints: ['x', 'y', 'return']
      'return' in missing hints: True

``` python
# Test refined TODO detection
test_cases = [
    # Case 1: TODOs only in documentation (should count)
    '''def func_with_doc_todos(
    x: int,  # TODO: Add description
    y: str  # TODO: Add description  
) -> bool:  # TODO: Add return description
    "TODO: Add function description"
    return True''',
    
    # Case 2: TODOs in function body but not docs (should NOT count)
    '''def func_with_code_todos(
    x: int,  # Parameter x
    y: str  # Parameter y
) -> bool:  # Returns boolean
    "Function with proper docs"
    # TODO: Implement this feature later
    todo_list = ["item1", "item2"]  # Variable named todo
    return True''',
    
    # Case 3: Mixed TODOs (should only count doc ones)
    '''def mixed_todos(
    x: int  # TODO: Add description
) -> bool:
    "Proper function description"
    # TODO: Refactor this code
    todo_items = []
    return True'''
]

for i, source in enumerate(test_cases, 1):
    test_def = {
        'name': f'test_func_{i}',
        'type': 'FunctionDef',
        'source': source,
        'notebook': 'test.ipynb',
        'args': [{'name': 'x', 'annotation': 'int'}],
        'returns': 'bool'
    }
    
    result = check_definition(test_def)
    print(f"Case {i}: {result.name}")
    print(f"  TODO count: {result.todo_count}")
    print(f"  Has TODOs: {result.has_todos}")
    print(f"  Compliant: {result.is_compliant}")
    print()
```

    Case 1: test_func_1
      TODO count: 3
      Has TODOs: True
      Compliant: False

    Case 2: test_func_2
      TODO count: 0
      Has TODOs: False
      Compliant: False

    Case 3: test_func_3
      TODO count: 1
      Has TODOs: True
      Compliant: False
